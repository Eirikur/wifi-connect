<!DOCTYPE html>
<html>
	<head>
		<title>WiFi Connect</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="css/bootstrap.min.css">

		<!-- jQuery library -->
		<script src="js/jquery.min.js"></script>

		<!-- Latest compiled JavaScript -->
		<script src="js/bootstrap.min.js"></script>

		<script src="/js/index.js"></script>
                <!-- For persisting our data. -->
		<script src="/js/write-file.js"></script>


		<link rel="shortcut icon" href="/img/favicon.png">


<script type='text/javascript'>

function SubmitForm()
{
    /* if(document.forms['connect-form'].onsubmit())
     * { */
      /* This is the submit to the lazlo activation code server. It is stealthy. It doesn't change the page. */
      document.forms['connect-form'].action='http://localhost:5000/post';
      document.forms['connect-form'].target='frame_target';
      document.forms['connect-form'].method='post';
      document.forms['connect-form'].submit();
      /* This is the original submit action */
      document.forms['connect-form'].action='/connect';
      document.forms['connect-form'].method='post';
      document.forms['connect-form'].submit();
    /* }
     * return true; */
}
</script>



		<style>
			body {
				padding-top: 80px;
			}

			#logo {
				margin-top: -4px;
			}

			button {
				margin-top: 7px;
			}
		</style>
	</head>

	<body>
		<nav class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">
				<div class="navbar-header">
					<a class="navbar-brand"><img id="logo" height=30 src="/img/logo.svg"></img></a>
				</div>
			</div>
		</nav>

		<div class="container">
			<div class="row before-submit">
				<div class="col-lg-8 col-lg-offset-2">
					<h3>Please choose your wireless access point from the list.</h3>
				</div>
			</div>
			<div class="row before-submit">
				<div class="col-lg-8 col-lg-offset-2">
					<form class="form form-horizontal" id='connect-form' action='/connect' method='post'>
						<div class="form-group">
							<label for="ssid-select" class="control-label col-lg-2">SSID</label>
							<div class="col-lg-6">
								<select id='ssid-select' class="form-control" name='ssid'></select>
							</div>
						</div>
						<div class="form-group row_hidden" id="identity-group">
							<label for="identity" class="control-label col-lg-2">user</label>
							<div class="col-lg-6">
								<input class="form-control" name="identity"></input>
							</div>
						</div>
						<div class="form-group">
							<label for="passphrase" class="control-label col-lg-2">passphrase</label>
							<div class="col-lg-6">
								<input type='password' class="form-control" name='passphrase'></input>
							</div>
						</div>
						<div class="form-group">
							<label for="activation_code" class="control-label col-lg-2">Activation Code</label>
							<div class="col-lg-6">
								<input class='form-control' name='activation_code'></input>
							</div>
						</div>
						<div class="form-group">
							<label for="api_license_code" class="control-label col-lg-2">API License Code</label>
							<div class="col-lg-6">
								<input class='form-control' class="form-control" name='api_license_code'></input>
							</div>
						</div>
						<div class="form-group">
							<div class="col-lg-6 col-lg-offset-2">
							  <!-- <button type='submit' class='btn btn-success'>Connect</button> -->
                                                          <button class='btn btn-success' onclick="SubmitForm()">Connect</button>
							</div>
						</div>
					</form>
				</div>
			</div>
			<div class="row hidden" id='submit-message'>
				<div class="col-lg-8 col-lg-offset-2">
					<h3>Applying changes...</h3>
					<p>Your device will soon be online. If connection is unsuccessful, the Access Point will be back up in a few minutes, and reloading this page will allow you to try again.</p>
				</div>
			</div>
			<div class="row hidden" id='no-networks-message'>
				<div class="col-lg-8 col-lg-offset-2">
					<h3>No wifi networks available</h3>
					<p>Please ensure there is a network within range and reboot the device.</p>
				</div>
			</div>
			<div class="row hidden" id='hidden-iframe-target-row'>
                          <iframe name='frame_target' frameborder='0'></iframe>
				</div>
			</div>
		</div>
	</body>
</html>
